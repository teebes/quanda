{% extends "layout/right_column.html" %}

{% load quanda %}

{% block css %}
<style type='text/css'>
#quanda_main_box {
    border: 1px solid #000000;
    margin: auto;
    padding: 5px;
    width: 410px;
}
#quanda_ask {
    border-right: 1px dotted #cccccc;
    float: left;
    padding-right: 5px;
    width: 195px;
}
#quanda_quicksearch {
    float: right;
    margin-left: 0px;
    width: 200px;
    
}
#quanda_panels {
    !border: 1px solid #000000;
    display: block;
    margin: auto;
    margin-top: 20px;
    width: 615px;
}
#quanda_panels div {
    padding: 0 5px 0 5px;
    float: left;
    width: 194px;
}
#quanda_panels h2 {
    text-align: center;
    margin-bottom: 10px;
}
#quanda_panel_middle_column {
    border-left: 1px dotted #cccccc;    
    border-right: 1px dotted #cccccc;
}
</style>
{% endblock %}

{% block body_content %}

{% if user.is_staff %}
<div style='margin-bottom: 10px;'>
    <a href="{% url quanda_tags_admin %}">manage tags</a>
    | <a href="{% url quanda_lists %}">manage lists</a>
</div>
{% endif %}

<div id='quanda_main_box'>
    <div id="quanda_quicksearch">
        <p>Search questions and answers:</p>
        <form action="{% url quanda_search %}" method="get">
            <input type='text' name='query' />
            <input type='submit' value='Search' />
        </form>
    </div>
    <div id="quanda_ask">
        <p><a href="{% url quanda_question_create %}">Ask a question</a></p>
        
        <p><i>Ask quanda a question. You don't even need to register!</i></p>
    </div>    
    <div style='clear: both;'></div>
</div>

<div id="quanda_panels">
    <div>
        <h2>Recent Questions</h2>
        {% for recent_question in recent_questions %}
            <p>
                <a href="{% url quanda_question_read recent_question.id %}">
                    {{ recent_question.title }}
                </a>
            </p>
        {% endfor %}
    </div>
    <div id='quanda_panel_middle_column'>
        <h2>Top Questions</h2>
        {% for top_question in top_questions %}
            <p>
                {{ top_question.score }} -
                <a href="{% url quanda_question_read top_question.question.id %}">
                    {{ top_question.question.title }}
                </a>
            </p>
        {% endfor %}
    </div>
    <div>
        <h2>Answers for you:</h2>
        {% if user.is_authenticated %}
            {% for answer in your_answers %}
                <div style='border-bottom: 1px dotted #cccccc;'>
                    <p>Latest answer to
                        <a href="{% url quanda_question_read answer.question.id %}#answer_{{ answer.id }}">{{ answer.question.title }}</a>:
                    </p>
                    {{ answer.answer_text|safe }}
                </div>
            {% empty %}
                <i>There are no answers to your questions at this time</i>
            {% endfor %}
        {% else %}
            <i><a href="/accounts/login">Log in</a> to see the answers to your questions.</i>
        {% endif %}
    </div>
</div>

{% endblock %}

{% block right_column %}

<div class='column_block'>
    <h1>Featured Questions</h1>
    <ul>
    {% for item in featured %}
        <li><a href="{% url quanda_question_read item.question.id %}">{{ item.question.title }}</a></li>
    {% endfor %}
    </ul>
</div>

{% endblock %}

